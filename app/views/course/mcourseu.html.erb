<div class="form-page">
  <div class="form-container">
    <div class="form-header">
      <div class="greeting">рдирдорд╕реНрддреЗ ЁЯЩП</div>
      <h1>Course-рдкрд░рд┐рд╡рд░реНрддрдирдВ рдХрд░реЛрддреБ</h1>
      <p class="form-subtitle">рдкрд╛рдареНрдпрдХреНрд░рдорд╕реНрдп рд╕реВрдЪрдирд╛рдВ рдкрд░рд┐рд╡рд░реНрддрдпрддреБ</p>
    </div>

    <%= form_for @course, url: course_update_path, multipart: true, class: "modern-form" do |f| %>
      <div class="form-group">
        <%= f.label "рд╢реАрд░реНрд╖рдХрдВ (Course Name)", class: "form-label" %>
        <%= f.text_field :name, required: true, class: "form-input", placeholder: "Enter course name..." %>
      </div>

      <div class="form-group">
        <%= f.label "Course Code", class: "form-label" %>
        <%= f.text_field :cname, required: true, class: "form-input", placeholder: "e.g., CS101" %>
      </div>

      <div class="form-group">
        <%= f.label "Registration Status", class: "form-label" %>
        <div class="radio-group">
          <label class="radio-label">
            <%= f.radio_button :regon, "on", class: "radio-input" %>
            <span class="radio-custom"></span>
            <span class="radio-text">Open</span>
          </label>
          
          <label class="radio-label">
            <%= f.radio_button :regon, "off", class: "radio-input" %>
            <span class="radio-custom"></span>
            <span class="radio-text">Closed</span>
          </label>
        </div>
      </div>

      <div class="form-group">
        <%= f.label "Description", class: "form-label" %>
        <%= f.text_area :description, required: true, class: "form-textarea", 
                        placeholder: "Write a brief description of the course...", rows: 5 %>
      </div>

      <div class="form-group">
        <%= f.label "Additional Information", class: "form-label" %>
        <%= f.text_area :more, required: true, class: "form-textarea", 
                        placeholder: "Add more details about the course (syllabus, objectives, etc.)...", rows: 6 %>
      </div>

      <div class="form-group">
        <%= f.label "Lecture Links (Optional)", class: "form-label" %>
        <%= f.text_area :yt, class: "form-textarea", 
                        placeholder: "Format:\nLecture 1: https://youtube.com/...\nLecture 2: https://youtube.com/...", rows: 4 %>
        <small style="display: block; margin-top: 0.5rem; color: #5a6c7d;">Add YouTube or video links for lectures, one per line</small>
      </div>

      <div class="form-group">
        <%= f.label "Current Image", class: "form-label" %>
        <div class="current-image">
          <%= image_tag rails_blob_url(@course.image), class: "preview-image", alt: @course.name %>
        </div>
      </div>

      <div class="form-group">
        <%= f.label "Change Image (optional)", class: "form-label" %>
        <div class="file-input-wrapper">
          <%= f.file_field :image, accept: "image/*", class: "file-input", id: "course-update-image-input" %>
          <label for="course-update-image-input" class="file-input-label">
            <i class="upload-icon">ЁЯУБ</i>
            <span>рдирд╡реАрдирдВ рдЪрд┐рддреНрд░рдВ рдЪрд┐рдиреЛрддреБ</span>
          </label>
        </div>
        <small style="display: block; margin-top: 0.5rem; color: #5a6c7d;">Leave empty to keep current image</small>
      </div>

      <div class="form-actions">
        <%= f.submit "рдЕрдЧреНрд░реЗрд╕реНрдерд╛рдкрдирдВ рдХрд░реЛрддреБ", class: "btn btn-primary" %>
        <%= link_to "рдкреНрд░рддрд┐рдЧрдЪреНрдЫрддреБ", all_courses_path, class: "btn btn-secondary" %>
      </div>
    <% end %>
  </div>
</div>

<script>
  // Preview file name when selected
  document.getElementById('course-update-image-input').addEventListener('change', function(e) {
    const fileName = e.target.files[0]?.name;
    if (fileName) {
      const label = document.querySelector('.file-input-label span');
      label.textContent = fileName;
    }
  });
</script>