<!-- First Section: About Us + Welcome Boxes -->
<section class="m-grid-container">
  <div class="m-left-section">
    <div class="m-heading-section">
      <h1>ABOUT US</h1>
      <span class="m-strip"></span>
    </div>

    <div class="m-content-block">
      <p class="m-sanskrit-text">
        संस्कृत-मण्डलः संस्कृतभाषायाः पुनरुत्थानस्य संवर्धनस्य च कृते कश्चन उपक्रमः वर्तते।
      </p>
      <p class="m-english-text">
        The Sanskrit Club is an initiative to revive and promote the bedrock for the growth of a large part of the glorious Indian Civilisation, the Sanskrit language.
      </p>
    </div>
  </div>

  <div class="m-right-section">
    <div class="m-grid-wrapper">
      <h1 class="m-box-text">नमो नमः!<br/>NAMO NAMAH!</h1>
      <span class="m-box m-bluish"></span>
    </div>

    <div class="m-grid-wrapper">
      <h1 class="m-box-text">संस्कृत-मण्डले सुस्वागतम्<br/>Welcome to Sanskrit Club</h1>
      <span class="m-box m-brownish"></span>
    </div>
  </div>
</section>

<!-- Second Section: Announcements with Verse on Left -->
<section class="m-announcements-container">
  <div class="m-announcements-grid-layout">
    <!-- Left Side: Sanskrit Verse -->
    <div class="m-verse-section">
      <p class="m-verse-sanskrit">
        जाड्यं धियो हरति सिंचति वाचि सत्यं,<br/>
        मानोन्नतिं दिशति पापमपाकरोति |<br/>
        चेतः प्रसादयति दिक्षु तनोति कीर्तिं,<br/>
        सत्संगतिः कथय किं न करोति पुंसाम् ||
      </p>
      <p class="m-verse-hindi">
        (अच्छे मित्रों का साथ बुद्धि की जड़ता को हर लेता है, वाणी में सत्य का संचार करता है, मान और उन्नति को बढ़ाता है और पाप से मुक्त करता है। चित्त को प्रसन्न करता है और हमारी कीर्ति को सभी दिशाओं में फैलाता है। आप ही कहें कि सत्संगति मनुष्यों के भले के लिये क्या नहीं करती!)
      </p>
    </div>

    <!-- Right Side: Announcements -->
    <div class="m-announcement-section">
      <div class="m-heading-section">
        <h1>ANNOUNCEMENTS</h1>
        <span class="m-strip"></span>
      </div>

      <%= link_to new_news_path, class: "m-ann-button" do %>
        <span>नूतनं घोषणां योजयतु</span>
        <span class="m-plus-icon">+</span>
      <% end %>      
      <div class="m-announcement-list">
        <% if @news.present? %>
          <% @news.each do |i| %>
            <div class="m-announcement-box">
              <div class="m-announcement-content">
                <%= i.news.html_safe %>
              </div>
              <div class="m-updel">
                <%= link_to news_path(i.id), class: "m-anone" do %>
                  <div class="m-edit-button">परिवर्तयतु</div>
                <% end %>
                <%= button_to news_delete_path(i.id), method: "delete",
                    data: {confirm: "Are you sure you want to delete this announcement?"}, class: "m-anone" do %>
                  <div class="m-delete-button">विनश्यतु</div>
                <% end %>
              </div>
            </div>
          <% end %>
        <% else %>
          <p class="m-no-announcements">No announcements at the moment.</p>
        <% end %>
      </div>

      <p class="m-visit-counter">
        You have visited this page <b><%= @visit %></b> times.
      </p>
    </div>
  </div>
</section>

<script>
// Parallax Scroll Effect for Sanskrit Club - mhomer version

document.addEventListener('DOMContentLoaded', function() {
  // Intersection Observer for fade-in animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -100px 0px'
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('m-visible');
      }
    });
  }, observerOptions);

  // Observe verse section
  const verseSection = document.querySelector('.m-verse-section');
  if (verseSection) {
    observer.observe(verseSection);
  }

  // Observe announcement section
  const announcementSection = document.querySelector('.m-announcement-section');
  if (announcementSection) {
    observer.observe(announcementSection);
  }

  // Observe each announcement box with staggered delay
  const announcementBoxes = document.querySelectorAll('.m-announcement-box');
  announcementBoxes.forEach((box, index) => {
    box.style.transitionDelay = `${index * 0.15}s`;
    observer.observe(box);
  });

  // Smooth scroll to announcements when scroll indicator is clicked
  const gridContainer = document.querySelector('.m-grid-container');
  if (gridContainer) {
    gridContainer.addEventListener('click', function(e) {
      if (e.target === this || e.target.textContent === '↓') {
        const announcementsContainer = document.querySelector('.m-announcements-container');
        if (announcementsContainer) {
          announcementsContainer.scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
          });
        }
      }
    });
  }

  // Optional: Parallax effect on scroll
  window.addEventListener('scroll', function() {
    const scrolled = window.pageYOffset;
    const gridContainer = document.querySelector('.m-grid-container');
    
    if (gridContainer && scrolled < window.innerHeight) {
      // Subtle parallax movement for the first section
      gridContainer.style.transform = `translateY(${scrolled * 0.3}px)`;
      gridContainer.style.opacity = 1 - (scrolled / window.innerHeight);
    }
  });
});
</script>