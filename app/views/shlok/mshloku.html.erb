<div class="form-page">
  <div class="form-container">
    <div class="form-header">
      <div class="greeting">рдирдорд╕реНрддреЗ ЁЯЩП</div>
      <h1>рд╢реНрд▓реЛрдХ-рдкрд░рд┐рд╡рд░реНрддрдирдВ рдХрд░реЛрддреБ</h1>
      <p class="form-subtitle">рд╢реНрд▓реЛрдХрд╕реНрдп рд╡рд┐рд╡рд░рдгрдВ рдкрд░рд┐рд╡рд░реНрддрдпрддреБ</p>
    </div>

    <%= form_for @shlok, url: shlok_update_path, html: { multipart: true, class: "modern-form" } do |f| %>
      <div class="form-group">
        <%= f.label :title, "рд╢реАрд░реНрд╖рдХрдВ", class: "form-label" %>
        <%= f.text_field :title, required: true, class: "form-input", placeholder: "рд╢реНрд▓реЛрдХрд╕реНрдп рд╢реАрд░реНрд╖рдХрдВ..." %>
      </div>

      <div class="form-group">
        <%= f.label :shlok, "рд╢реНрд▓реЛрдХрдГ", class: "form-label" %>
        <%= f.text_area :shlok, required: true, class: "form-textarea", placeholder: "рд╢реНрд▓реЛрдХрдВ рд▓рд┐рдЦрддреБ...", rows: 6 %>
      </div>

      <div class="form-group">
        <%= f.label :translation, "рдЕрдиреБрд╡рд╛рджрдГ", class: "form-label" %>
        <%= f.text_area :translation, required: true, class: "form-textarea", placeholder: "рдЕрдиреБрд╡рд╛рджрдВ рд▓рд┐рдЦрддреБ...", rows: 6 %>
      </div>

      <div class="form-group">
        <label class="form-label">рд╡рд░реНрддрдорд╛рдирдВ рд╢реНрд░рд╡реНрдпрд╕рдЮреНрдЪрд┐рдХрд╛</label>
        <div class="current-audio">
          <audio src="<%= rails_blob_url(@shlok.audio) %>" controls class="audio-preview"></audio>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label">рдиреВрддрдирдВ рд╢реНрд░рд╡реНрдпрд╕рдЮреНрдЪрд┐рдХрд╛ (рд╡реИрдХрд▓реНрдкрд┐рдХрдореН)</label>
        <%= f.file_field :audio, class: "file-input", id: "shlok_audio_input", accept: "audio/*", style: "display: none;" %>
        <label for="shlok_audio_input" class="file-input-label" style="display: flex;">
          <i class="upload-icon">ЁЯО╡</i>
          <span id="file-name">рдиреВрддрдирд╛рдВ рд╢реНрд░рд╡реНрдпрд╕рдЮреНрдЪрд┐рдХрд╛рдВ рдЪрд┐рдиреЛрддреБ</span>
        </label>
      </div>

      <div class="form-actions">
        <%= f.submit "рдЕрдЧреНрд░реЗрд╕реНрдерд╛рдкрдирдВ рдХрд░реЛрддреБ", class: "btn btn-primary" %>
        <%= link_to "рдкреНрд░рддрд┐рдЧрдЪреНрдЫрддреБ", all_shloks_path, class: "btn btn-secondary" %>
      </div>
    <% end %>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const fileInput = document.getElementById('shlok_audio_input');
  const fileName = document.getElementById('file-name');
  
  if (fileInput && fileName) {
    fileInput.addEventListener('change', function() {
      if (this.files && this.files.length > 0) {
        fileName.textContent = this.files[0].name;
      }
    });
  }
});
</script>