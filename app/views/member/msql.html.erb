<div class="sql-container">
  <div class="sql-header">
    <h1>SQL QUERY EXECUTOR</h1>
    <p>Execute database queries and view results</p>
    <%= link_to member_area_path, class: "back-button" do %>
      <i class="fa-solid fa-arrow-left"></i> Back to Member Area
    <% end %>
  </div>

  <div class="sql-form-wrapper">
    <div class="syntax-info">
      <i class="fa-solid fa-info-circle"></i>
      <span><strong>Syntax:</strong> show table_name;</span>
    </div>

    <%= form_tag exec_sql_path, class: "sql-form" do %>
      <div class="form-group">
        <%= label_tag :query, "SQL Query", class: "form-label" %>
        <%= text_area_tag :query, @query, required: true, class: "sql-textarea", placeholder: "Enter your SQL query here..." %>
      </div>

      <%= submit_tag "Execute Query", class: "execute-button" %>
    <% end %>
  </div>

  <% if @results %>
    <div class="results-container">
      <div class="results-header">
        <i class="fa-solid fa-check-circle"></i>
        <h3>Query Results</h3>
      </div>
      
      <div class="results-table-wrapper">
        <table class="results-table">
          <% @results.each do |row| %>
            <tr>
              <% row.each do |column| %>
                <td><%= column[1] %></td>
              <% end %>
            </tr>
          <% end %>
        </table>
      </div>
    </div>
  <% elsif @error %>
    <div class="error-container">
      <i class="fa-solid fa-exclamation-triangle"></i>
      <h3>Error</h3>
      <p><%= @error %></p>
    </div>
  <% end %>
</div>