<div class="form-page">
  <div class="form-container">
    <div class="form-header">
      <div class="greeting">‡§®‡§Æ‡§∏‡•ç‡§§‡•á üôè</div>
      <h1>‡§®‡•Ç‡§§‡§®‡§Ç ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§Ç ‡§Ø‡•ã‡§ú‡§Ø‡§§‡•Å</h1>
      <p class="form-subtitle">‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§æ‡§≤‡§Ø‡•á ‡§®‡§µ‡•Ä‡§®‡§Ç ‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§Ç ‡§∏‡•É‡§ú‡§Ø‡§§‡•Å</p>
    </div>

    <%= form_tag library_post_path, multipart: true, class: "modern-form" do %>
      <div class="form-row">
        <div class="form-group">
          <%= label_tag :bookid, "Unique ID", class: "form-label" %>
          <%= text_field_tag :bookid, nil, required: true, class: "form-input", placeholder: "LIB001..." %>
        </div>

        <div class="form-group">
          <%= label_tag :serialno, "‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï‡§Ç (Serial No.)", class: "form-label" %>
          <%= text_field_tag :serialno, nil, required: true, class: "form-input", placeholder: "‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§∏‡•ç‡§Ø ‡§®‡§æ‡§Æ..." %>
        </div>

        
      </div>

      <div class="form-row">

        <div class="form-group">
        <%= label_tag :name, "‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï‡§Ç (Title)", class: "form-label" %>
        <%= text_field_tag :name, nil, required: true, class: "form-input", placeholder: "‡§™‡•Å‡§∏‡•ç‡§§‡§ï‡§∏‡•ç‡§Ø ‡§®‡§æ‡§Æ..." %>
        </div>
        <div class="form-group">
          <%= label_tag :author, "‡§∞‡§ö‡§Ø‡§ø‡§§‡•É (Author)", class: "form-label" %>
          <%= text_field_tag :author, nil, required: true, class: "form-input", placeholder: "‡§≤‡•á‡§ñ‡§ï‡§∏‡•ç‡§Ø ‡§®‡§æ‡§Æ..." %> 
        </div>

      </div>

      <div class="form-row">
        <div class="form-group">
          <%= label_tag :primary_genre, "‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï ‡§µ‡§∞‡•ç‡§ó‡§É (Primary Genre)", class: "form-label" %>
          <%= text_field_tag :primary_genre, nil, required: true, class: "form-input"%>
        </div>

        <div class="form-group">
          <%= label_tag :secondary_genre, "‡§¶‡•ç‡§µ‡§ø‡§§‡•Ä‡§Ø‡§ï ‡§µ‡§∞‡•ç‡§ó‡§É (Secondary Genre)", class: "form-label" %>
          <%= text_field_tag :secondary_genre, nil, required: true, class: "form-input"%>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= label_tag :content_language, "‡§∏‡§æ‡§Æ‡§ó‡•ç‡§∞‡•Ä ‡§≠‡§æ‡§∑‡§æ (Content Language)", class: "form-label" %>
          <%= select_tag :content_language, 
              options_for_select([
                ['‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§Æ‡•ç (Sanskrit)', '‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§Æ‡•ç'],
                ['‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)', '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä'],
                ['English', 'English'],
                ['‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§-‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Sanskrit-Hindi)', '‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§-‡§π‡§ø‡§®‡•ç‡§¶‡•Ä'],
                ['‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§-English', '‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§-English'],
                ['‡§Ö‡§®‡•ç‡§Ø‡§§‡•ç (Other)', '‡§Ö‡§®‡•ç‡§Ø‡§§‡•ç']
              ]), 
              { prompt: '‡§≠‡§æ‡§∑‡§æ‡§Ç ‡§ö‡§ø‡§®‡•ã‡§§‡•Å...', required: true, class: "form-input" }
          %>
        </div>

        <div class="form-group">
          <%= label_tag :copies, "‡§ï‡•Å‡§≤ ‡§™‡•ç‡§∞‡§§‡§Ø‡§É (Total Copies)", class: "form-label" %>
          <%= number_field_tag :copies, nil, required: true, class: "form-input", placeholder: "‡§ï‡•Å‡§≤ ‡§∏‡§ô‡•ç‡§ñ‡•ç‡§Ø‡§æ...", min: 0 %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= label_tag :present, "‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§™‡•ç‡§∞‡§§‡§Ø‡§É (Present Copies)", class: "form-label" %>
          <%= number_field_tag :present, nil, required: true, class: "form-input", placeholder: "‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§∏‡§ô‡•ç‡§ñ‡•ç‡§Ø‡§æ...", min: 0 %>
        </div>

        <div class="form-group">
          <%= label_tag :almirah, "‡§Ö‡§≤‡§Æ‡§æ‡§∞‡•Ä (Almirah)", class: "form-label" %>
          <%= text_field_tag :almirah, nil, required: true, class: "form-input", placeholder: "A1, B2..." %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= label_tag :rack, "‡§∞‡•à‡§ï (Rack)", class: "form-label" %>
          <%= text_field_tag :rack, nil, required: true, class: "form-input", placeholder: "R1, R2..." %>
        </div>

        <div class="form-group">
          <%= label_tag :location_in_rack, "‡§∞‡•à‡§ï-‡§∏‡•ç‡§•‡§æ‡§®‡§Æ‡•ç (Location in Rack)", class: "form-label" %>
          <%= text_field_tag :location_in_rack, nil, class: "form-input", placeholder: "Top, Middle, Bottom..." %>
        </div>
      </div>

      <div class="form-group">
        <%= label_tag :link, "‡§™‡•Å‡§∏‡•ç‡§§‡§ï ‡§ö‡§ø‡§§‡•ç‡§∞‡§Æ‡•ç (Book Image)", class: "form-label" %>
        <div class="file-input-wrapper">
          <%= file_field_tag :link, class: "file-input", id: "library-image-input", accept: "image/*" %>
          <label for="library-image-input" class="file-input-label">
            <i class="upload-icon">üìÅ</i>
            <span id="library-image-file-name">‡§ö‡§ø‡§§‡•ç‡§∞‡§Ç ‡§ö‡§ø‡§®‡•ã‡§§‡•Å (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï‡§Æ‡•ç)</span>
          </label>
        </div>
        <div id="library-image-preview" class="file-preview"></div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= label_tag :added_by, "‡§Ø‡•ã‡§ú‡§ø‡§§‡§É (Added By)", class: "form-label" %>
          <%= text_field_tag :added_by, session[:name], required: true, class: "form-input", readonly: true %>
        </div>

        <div class="form-group">
          <%= label_tag :issued_to, "‡§ã‡§£‡§Ç ‡§¶‡§§‡•ç‡§§‡§É (Issued To)", class: "form-label" %>
          <%= text_field_tag :issued_to, nil, class: "form-input", placeholder: "‡§Ø‡§¶‡§ø ‡§ã‡§£‡§Ç ‡§¶‡§§‡•ç‡§§‡§Æ‡•ç ‡§§‡§∞‡•ç‡§π‡§ø ‡§®‡§æ‡§Æ..." %>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <%= label_tag :doi, "‡§ã‡§£‡§∏‡•ç‡§Ø ‡§¶‡§ø‡§®‡§æ‡§ô‡•ç‡§ï‡§É (Date of Issue)", class: "form-label" %>
          <%= date_field_tag :doi, nil, class: "form-input" %>
        </div>

        <div class="form-group">
          <%= label_tag :dor, "‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡§∞‡•ç‡§™‡§£‡§∏‡•ç‡§Ø ‡§¶‡§ø‡§®‡§æ‡§ô‡•ç‡§ï‡§É (Date of Return)", class: "form-label" %>
          <%= date_field_tag :dor, nil, class: "form-input" %>
        </div>
      </div>

      <div class="form-actions">
        <%= submit_tag "‡§Ö‡§ó‡•ç‡§∞‡•á‡§∏‡•ç‡§•‡§æ‡§™‡§®‡§Ç ‡§ï‡§∞‡•ã‡§§‡•Å", class: "btn btn-primary" %>
        <%= link_to "‡§™‡•ç‡§∞‡§§‡§ø‡§ó‡§ö‡•ç‡§õ‡§§‡•Å", all_librarys_path, class: "btn btn-secondary" %>
      </div>
    <% end %>
  </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
  const fileInput = document.getElementById('library-image-input');
  const fileNameDisplay = document.getElementById('library-image-file-name');
  const previewContainer = document.getElementById('library-image-preview');

  if (fileInput) {
    fileInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      
      if (file) {
        // Update file name
        fileNameDisplay.textContent = file.name;
        
        // Create preview
        const reader = new FileReader();
        reader.onload = function(e) {
          previewContainer.innerHTML = `
            <div style="position: relative; display: inline-block;">
              <img src="${e.target.result}" alt="Preview" style="max-width: 300px; max-height: 300px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
              <button type="button" id="remove-library-image" style="position: absolute; top: -10px; right: -10px; background: #ff6b6b; color: white; border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; font-size: 18px; line-height: 1; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">√ó</button>
            </div>
          `;
          
          // Add remove functionality
          document.getElementById('remove-library-image').addEventListener('click', function() {
            fileInput.value = '';
            fileNameDisplay.textContent = '‡§ö‡§ø‡§§‡•ç‡§∞‡§Ç ‡§ö‡§ø‡§®‡•ã‡§§‡•Å (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï‡§Æ‡•ç)';
            previewContainer.innerHTML = '';
          });
        };
        reader.readAsDataURL(file);
      }
    });
  }
});
</script>