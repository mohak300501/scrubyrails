<div class="library-page">
    <div class="page-header">
    <h1>рдкреБрд╕реНрддрдХрд╛рд▓рдпрдГ</h1>
    <p class="page-subtitle">рд╕рд░реНрд╡рд╛рдгрд┐ рдкреБрд╕реНрддрдХрд╛рдирд┐ рдЕрдиреНрд╡реЗрд╖рдпрддреБ</p>
    </div>

  <div class="search-filter-bar">
    <div class="search-box">
      <span class="search-icon">ЁЯФН</span>
      <input type="text" id="searchInput" placeholder="рдирд╛рдо, рд▓реЗрдЦрдХрдГ рдЕрдерд╡рд╛ рд╡рд░реНрдЧрдГ рд▓рд┐рдЦрддреБ..." class="search-input">
    </div>
  </div>

  <div class="library-container">
    <% @libraries.each do |library| %>
      <div class="library-card" data-book-info="<%= [library.name, library.author, library.primary_genre].join(' ').downcase %>">
        <% if library.link.attached? %>
          <div class="library-image">
            <%= image_tag library.link, alt: library.name %>
          </div>
        <% else %>
          <div class="library-image-placeholder">
            <span class="book-icon">ЁЯУЪ</span>
          </div>
        <% end %>
        
        <div class="library-content">
          <h2 class="library-title"><%= library.name %></h2>
          
          <div class="library-meta">
            <div class="meta-item">
              <span class="meta-label">рд░рдЪрдпрд┐рддреГ:</span>
              <span class="meta-value"><%= library.author %></span>
            </div>
            <div class="meta-item">
              <span class="meta-label">рд╡рд░реНрдЧрдГ:</span>
              <span class="meta-value"><%= library.primary_genre %></span>
            </div>
            <div class="meta-item">
              <span class="meta-label">рднрд╛рд╖рд╛:</span>
              <span class="meta-value"><%= library.content_language %></span>
            </div>
            <div class="meta-item">
              <span class="meta-label">рд╕реНрдерд┐рддрд┐рдГ:</span>
              <% if library.present.to_i > 0 %>
                <span class="availability-badge available">
                  тЬУ рдЙрдкрд▓рдмреНрдзрдореН (<%= library.present %> рдкреНрд░рддрдпрдГ)
                </span>
              <% else %>
                <span class="availability-badge unavailable">
                  тЬЧ рдЕрдиреБрдкрд▓рдмреНрдзрдореН
                </span>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <% if @libraries.empty? %>
    <div class="empty-state-container">
      <div class="empty-state">
        <div class="empty-icon">ЁЯУЪ</div>
        <h2>рдЕрдзреБрдирд╛ рдкреБрд╕реНрддрдХрд╛рдирд┐ рди рд╕рдиреНрддрд┐</h2>
        <p>рд╢реАрдШреНрд░рдореЗрд╡ рдиреВрддрдирд╛рдирд┐ рдкреБрд╕реНрддрдХрд╛рдирд┐ рдЖрдЧрдорд┐рд╖реНрдпрдиреНрддрд┐!</p>
      </div>
    </div>
  <% end %>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('searchInput');
  const bookCards = document.querySelectorAll('.library-card');

  if (searchInput) {
    searchInput.addEventListener('input', function() {
      const searchTerm = this.value.toLowerCase();
      
      bookCards.forEach(card => {
        const text = card.textContent.toLowerCase();
        card.style.display = text.includes(searchTerm) ? 'flex' : 'none';
      });
    });
  }
});
</script>
